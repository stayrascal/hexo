---
title: adv
date: 2019-07-22 22:48:02
tags:
---

## 广告

### 广告载体
    - Web时代之前：纸质媒体，线下实体广告牌、电视广告、LED富媒体广告
    - Web时代：互联网广告
    - 移动互联网时代：移动应用，移动载体APP

### 在线计算广告和传统广告的差别
传统广告存在效果难以追踪、过程较难优化、用户难以个性化匹配的问题。相比而言，在线计算广告可以在数据追踪回收、人群画像定向，点击转化预估，竞价模型等方面做到：
    - 广告效果可以追踪的
    - 结果是可以量化的
    - 人群是可以定向计算的
    - 中间过程是可以持续优化的
    - 资源归属是可以做竞价的

### 广告的分类：
    - 追求长期的关注和利益：以品牌传播、塑造品牌口碑为目的的品牌广告
    - 以点击转换为核心：一次广告当前带来的实际转化

### 广告的计费方式
    - (o)CPM(Cost Per Mille): 千人成本，即可以理解为展示千人对应的费用，这种方式是不为转化效果负责的。
    - (o)CPC: 每点击成本，即不考虑展示曝光量，只按每个广告点击进行计费，一定程度上是需要考虑效果转化的，但一般只是转化的中间层，以电商页面投放为例，用户点击了页面，也只是进入到了商详页面，最终的转化还得看是否下单购买。
    - (o)CPS: 每销售成本，即直接将最终的销售与广告计费挂钩，其实更有点像分成模式，即销售了多少，就需要给导流广告计费多少，是一种纯粹的效果负责的广告。
    - (o)CPA: 每动作成本，所谓的动作，一般是指下载或者实际的一些转化动作，比如在流量池里投放APP的下载页面，只要有一个下载就记为一次，同样也是一个偏向于为效果负责的模式。
    - (o)CPD: 按天计费，这种实际上是把时间维度拉出来做计费方式，除了天还有其他时间颗粒度，比如小时，周等等，这种广告模式在各种应用分发市场中非常常见，对于部分资源位按天进行费用计算等，通常不为效果转化负责。
    - CPT(Cost Per Time): 即按时长计费广告。按时长计费是包时段包位置投放广告的一种形式。
    - GD (Guarentee Delivery): 保证递送的广告，即保量广告，按展示量定价。

### 在线计算广告的本质
在线计算广告最核心的本质是将广告主和用户做关联。
对于广告主来说，其目的是在有限的预算内，最大化的转化。
对于平台方来说，一方面提升广告和用户的匹配度，同时要考虑平台方的收益最大化，比如竞价广告。
在这个过程中，数据发挥的作用主要是做好连接层、优化匹配的过程，进行效果转化预估，权衡好竞价和投放的问题。

### 推荐系统和计算广告
    - 相似之处：其本质相同点都是对候选资源的有效排序问题。对于计算广告来说，候选资源就是广告池，对于推荐系统来说，候选资源可以是商品、资讯、视频等
    - 差异：
        - 思考角度：计算广告是站在广告主的角度，去匹配流量，广告主对投放的广告一定程度上有转换相关的诉求存在；推荐系统是站在用户的角度去匹配资源
        - 资源的组织方式：对于计算广告来说，非常注重广告的创意体现；对于推荐系统来说，更在于选择和排序
        - 竞价：广告位往往只有一个，平台方使用竞价来考虑本身的收益；推荐系统一般不存在这样的诉求，只要用户肯购买，推荐A商品和B商品对于平台来说几乎一致。当然在某些情况下，二者会出现重合，比如A、B商品对于平台方的收益不一致的时候。

### 为什么要建立埋点体系
收集用户的任何操作的反馈数据，然后基于此做一些价值挖掘方面的事。通过真实的基础数据收集，进一步的进行加工整理，能够从中获取很多有用的信息，用于精准化运营、洞察性运营，提升用户体验，优化我们的产品。比如：
- 基本的产品活跃状态监控，留存分析、流失分析、新增变化、忠诚分析、渠道分析等。
- 基本信息获取，例如机型、网络类型、操作系统，IP地域等，绘制基础用户人群画像。
- 推荐系统，根据用户行为操作，为用户绘制兴趣画像，进行精准的兴趣推荐。
- 查看页面的按钮点击分布，提升主路径的转化效果，删减页面僵尸按钮，产品做减法，优化用户体验。
- 主路径流失分析，漏斗模型，提升转化效果。
- 搜索效果分析，掌握用户的搜索热点，帮助进行数据运营。

### 采集的点有哪些
- 基础数据: 机型、操作系统、分辨率、ip、网络模式，
- 操作相关绑定: 页面编号、内容id、用户id、操作类型、控件id

### 第三方数据分析平台的缺陷
像友盟+、神策、GrowingIO第三方的数据分析平台，只能够带来常规性的分析，诸如流失、留存、渠道、用户成分等等。想要做到更定制化，甚至对数据应用的更深、挖掘的更深，相对来说比较难的。并且，对于部分对于数据保密性要求较高的公司来说，企业的数据上报的第三方的数据分析公司的服，务中，总是存在风险的。


### 推荐系统
推荐系统的本质是在用户需求不明确的情况下，从海量的信息中为用户寻找其感兴趣的信息的技术手段。
推荐系统的本质是通过技术的手段将物品和人关联起来，方便人获取对自己有价值的物品。

推荐系统是一项工程技术解决方案，要讲推荐系统落地到业务上需要大量的工程开发，涉及到日志打点，日志收集，ETL，分布式计算，特征工程，推荐算法建模，数据存储，提供接口服务，UI展示与交互，推荐效果评估等方面，推荐系统是一项庞大复杂的系统工程；
推荐系统是机器学习的一个分支应用，推荐系统大量使用机器学习技术，利用各种算法构建推荐模型，提升推荐的精确度，惊喜度，覆盖率等，甚至是实时反馈用户的兴趣变化；
推荐系统是一项交互式产品功能，产品为推荐系统提供载体，用户通过使用产品触达以及触发推荐系统，推荐系统为用户提供个性化的推荐，从而提升用户体验；
推荐系统是一种为用户提供感兴趣信息的便捷渠道，通过为用户提供信息创造商业价值。

#### 推荐系统的五种范式
- 完全个性化范式：猜你喜欢
- 群组个性化范式：将用户分组，每个提供个性化的推荐列表
- 非个性化范式：为所有用户提供完全一样的推荐
- 物品关联物品方式
- 笛卡尔积范式：每个用户跟每个物品组合产生的推荐不相同

#### 推荐系统架构的6大原则
- 通用性：具备包容能力，业务的任何推荐产品都可以用这一套架构来涵盖和实现
- 模块化：目的在于将一个业务安装功能做拆分，每个模块只包含于其功能相关的内容，模块之前通过一致性的协议调用。模块化的目的是为了重用
- 组件化：主要目的是减少耦合。一个独立的组件可以是一个软件包，web服务等。组件化的目的是为了解耦。
- 一致性：模块的输入输出采用统一的数据交互协议
- 可拓展性
- 抽象性

#### 推荐系统的评估指标
    - 用户的维度
        - 容易量化
            - 准确度
            - 体验流畅度
        - 难以量化
            - 惊喜度(Serendipity): 推荐不一定跟用户的历史兴趣相似，可能是用户不熟悉的，但是用户感觉很满意。
            - 新颖性(novelty): 用户没有了解过的物品
            - 信任度(Confidence & Trust)
            - 多样性
    - 平台的维度
        - 用户行为相关指标: 用户活跃、留存、转化、使用时长
        - 商业变现相关指标
        - 商家相关指标
    - 推荐系统自身维度
        - 准确度
        - 实时性: 捕捉用户兴趣变化
        - 鲁棒性
        - 响应及时稳定性
        - 高并发能力
        - 可维护性
        - 可拓展性
        - 模型是否可并行训练
    - 推荐物品的角度
        - 覆盖率
        - 挖掘长尾能力

#### 推荐系统的评估方式
    - 离线评估
        - 准确度
            - 评分预测模型: RMSE, MAE
            - 分类模型: Precision, Recall, F1-score
            - 排序模型: MAP(Mean Average Precision), NDCG(Normalized Discounted Cumulative Gain), MRR(Mean Reciprocal Rank)
        - 覆盖率: Coverage
        - 多样性: 对物品聚类，在推荐列表中插入不同类别的物品
        - 实时性
        - 实时性
        - 鲁棒性
    - 在线评估
        - 响应及时稳定性指标
            - 用户请求推荐服务时响应时间要控制在200ms之内。一般采用百分之多少的请求控制在什么时间内这样的指标来评估接口的响应时间
        - 抗高并发能力指标
            - 在接口上线前对接口做打压测试
            - 可以采用一些技术手段来避免对接口的高并发访问，比如增加缓存，web服务器具备横向拓展的能力，利用CDN资源，在特殊情况下对推荐服务进行分流、限流、降级
        - 用户行为指标
            - AB测试
            - 比较推荐算法产生的指标与大盘指标，体现推荐算法的优势
        - 度量推荐系统长尾能力
            - 根据二八定律识别出那些物品是长尾物品
            - 所有长尾物品每天有多少被推荐出去了
            - 有多少比例的用户，被推荐了长尾
            - 长尾内容的转化情况和产生的商业价值
    - 主观评估：针对惊喜度、新颖性、信任度、体验流畅度这些表达用户主观感受的用户维度指标
        - 用户问卷调查
        - 电话访谈
        - 跟用户直接见面沟通
        - 指导建议
            - 主观评估很耗时间，需要设计好流程
            - 让用户参与主观评估，需要提供一定好处
            - 选择样本要具有代表性，样本量不能太少，抽样方法也要科学
    - 需要关注的问题
        - 离线评估准确度高的模型，在线评估不一定高。（需要引入AB测试减少新算法上线对用户体验的影响）
        - 推荐系统寻求的是一个全局最优化的方案(解)，不能保证每个用户都是预测最准的
        - 推荐系统是一个多目标优化问题。需要平衡很多因素(商业、用户体验、技术实现、资金、人力等)，怎么做好平衡是一种哲学。创业前期可能以用户体验为主，需要大力发展用户，当用户量足够多后，可能会侧重商业变现。
        - AB测试平台对推荐评估的巨大价值
        - 重视线上用户行为及商业变现方面的评估

### 推荐系统的商业价值
- 广告变现
    - 广告精准投放本身是一个复杂的技术工程问题，实现的算法技术也跟推荐系统具有很多的相似性，也会依赖用户画像等大数据基础能力。
    - 随着信息流技术的成熟及在提升内容分发和提升用户使用时长等方面的价值, 企业商业变现的诉求催生了信息流广告技术。信息流广告可以完美地跟近实时个性化推荐结合起来，通过借助个性化推荐的巨大流量及精准兴趣匹配，让广告产生最大化的商业价值。
- 电商变现
- 增值服务变现
    - 推荐系统通过精准地为非会员用户推荐他(她)感兴趣的会员节目, 提升会员节目在非会员用户的曝光, 从而促进非会员用户购买会员。个性化推荐能够更好的挖掘用户深层的兴趣需求, 准确触达用户的兴趣点, 从而带来更精准的会员节目推荐。
- 用户增长
    - 推荐系统需要更好的服务用户，提升用户留存、活跃，占领用户的时间才能帮助平台方让用户沉淀下来。
- 成本节省及效率提升
- 总结
    - 提升广告的曝光与转化；
    - 促进物品提供方(即商家)生态繁荣；
    - 促进物品售卖，获取更多经济收益；
    - 提升会员的转化与会员留存；
    - 用户增长：提升用户留存、活跃、停留时长；
    - 节省人力成本；
    - 提升内容分发效率；

#### 机器学习中的无约束优化算法
- 梯度下降
    - 批量梯度下降
    - 随机梯度下降
    - 小批量梯度下降
- 最小二乘法
- 牛顿法
- 拟牛顿法
梯度下降法和最小二乘法相比，梯度下降法需要选择步长，而最小二乘法不需要。梯度下降法是迭代求解，最小二乘法是计算解析解。如果样本量不算很大，且存在解析解，最小二乘法比起梯度下降法要有优势，计算速度很快。但是如果样本量很大，用最小二乘法由于需要求一个超级大的逆矩阵，这时就很难或者很慢才能求解解析解了，使用迭代的梯度下降法比较有优势。
梯度下降法和牛顿法/拟牛顿法相比，两者都是迭代求解，不过梯度下降法是梯度求解，而牛顿法/拟牛顿法是用二阶的海森矩阵的逆矩阵或伪逆矩阵求解。相对而言，使用牛顿法/拟牛顿法收敛更快。但是每次迭代的时间比梯度下降法长。

### 推荐阅读
- 推荐系统的工程实现：https://mp.weixin.qq.com/s/hccUo170_8lhdv6C3OzGzw
- 推荐系统评估：https://mp.weixin.qq.com/s?__biz=MzI1NjM1ODEyMg==&mid=2247483747&idx=1&sn=c3263efc68606a5b9070316518e8fe0f
- 推荐系统的商业价值：https://mp.weixin.qq.com/s?__biz=MzI1NjM1ODEyMg==&mid=2247483778&idx=1&sn=9aefd51afcd454b9cffdc9dd154ebbe5
- 推荐系统的十条军规：https://www.deeplearn.me/2018.html
